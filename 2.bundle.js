(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{73:function(e,a,t){"use strict";t.d(a,"c",(function(){return s})),t.d(a,"d",(function(){return n})),t.d(a,"b",(function(){return c})),t.d(a,"a",(function(){return o}));var i=t(11),r=t.n(i);const s={images:r.a.arrayOf(r.a.string.isRequired),isPremium:r.a.bool.isRequired,title:r.a.string.isRequired,isFavorite:r.a.bool.isRequired,rating:r.a.number.isRequired,type:r.a.string.isRequired,bedrooms:r.a.number.isRequired,maxAdults:r.a.number.isRequired,price:r.a.number.isRequired,goods:r.a.arrayOf(r.a.string.isRequired),host:r.a.shape({avatarUrl:r.a.string.isRequired,id:r.a.number.isRequired,isPro:r.a.bool.isRequired,name:r.a.string.isRequired}),description:r.a.string.isRequired},n={comment:r.a.string.isRequired,date:r.a.string.isRequired,id:r.a.number.isRequired,rating:r.a.number.isRequired,user:r.a.shape({avatarUrl:r.a.string.isRequired,id:r.a.number.isRequired,isPro:r.a.bool.isRequired,name:r.a.string.isRequired})},c={id:r.a.number.isRequired,isFavorite:r.a.bool.isRequired,isPremium:r.a.bool.isRequired,previewImage:r.a.string.isRequired,price:r.a.number.isRequired,rating:r.a.number.isRequired,title:r.a.string.isRequired,type:r.a.string.isRequired,city:r.a.shape({name:r.a.string.isRequired})},o={avatarUrl:r.a.string.isRequired,email:r.a.string.isRequired,id:r.a.number.isRequired,isPro:r.a.bool.isRequired,name:r.a.string.isRequired}},74:function(e,a,t){"use strict";var i=t(0),r=t.n(i),s=t(19),n=t(12),c=t(11),o=t.n(c),l=t(14),m=t(73),d=t(31),u=t(30),p=t(29);const _={border:"none",backgroundColor:"transparent"},g=({isAuth:e,user:a,onLogout:t})=>r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"header__wrapper"},r.a.createElement("div",{className:"header__left"},r.a.createElement(l.b,{className:"header__logo-link header__logo-link--active",to:"/"},r.a.createElement("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"}))),r.a.createElement("nav",{className:"header__nav"},r.a.createElement("ul",{className:"header__nav-list"},r.a.createElement("li",{className:"header__nav-item user"},r.a.createElement(l.b,{className:"header__nav-link header__nav-link--profile",to:e?"/favorites":"/login"},r.a.createElement("div",{className:"header__avatar-wrapper user__avatar-wrapper",style:e&&{backgroundImage:a.avatarUrl}||{}}),r.a.createElement("span",{className:e?"header__user-name user__name":"header__login"},e&&a.email||"Sign in"))),e&&r.a.createElement("li",{className:"header__nav-item user"},r.a.createElement("button",{className:"header__nav-link header__nav-link--profile",style:_,onClick:()=>t(),"data-testid":"logout"},r.a.createElement("span",{className:"header__login"},"Logout"))))))));g.propTypes={isAuth:o.a.bool.isRequired,user:o.a.shape(m.a),onLogout:o.a.func.isRequired};const v={onLogout:u.c};a.a=Object(n.d)(Object(s.b)(e=>({user:Object(d.b)(e)}),v),p.a)(g)},75:function(e,a,t){"use strict";var i=t(0),r=t.n(i),s=t(11),n=t.n(s),c=t(32),o=t(10);a.a=e=>{const a=a=>r.a.createElement(r.a.Fragment,null,a.isLoaded===o.a.LOAD&&r.a.createElement(c.a,null),r.a.createElement(e,a));return a.propTypes={isLoaded:n.a.oneOf([...Object.values(o.a)]).isRequired},a}},76:function(e,a,t){"use strict";var i=t(0),r=t.n(i),s=t(11),n=t.n(s),c=t(3),o=t(14),l=t(29),m=t(73);const d={main:{articleClass:"cities__place-card ",image:{class:"cities",width:260,height:200},infoClass:""},favorites:{articleClass:"favorites__card ",image:{class:"favorites",width:150,height:110},infoClass:"favorites__card-info "},offer:{articleClass:"near-places__card ",image:{class:"near-places",width:260,height:200},infoClass:""}},u=({isPremium:e,previewImage:a,price:t,isFavorite:i,rating:s,title:n,id:l,type:m,cardType:u,onChnageActiveCardId:p,onFavoriteClick:_,isAuth:g})=>{const v=d[u],h=Object(c.g)();return r.a.createElement("article",{className:v.articleClass+"place-card",onMouseEnter:()=>{p(l)},onMouseLeave:()=>{p(null)}},e&&r.a.createElement("div",{className:"place-card__mark"},r.a.createElement("span",null,"Premium"))||"",r.a.createElement("div",{className:v.image.class+"__image-wrapper place-card__image-wrapper"},r.a.createElement(o.b,{to:"/offer/"+l},r.a.createElement("img",{className:"place-card__image",src:a,width:v.image.width,height:v.image.height,alt:"Place image"}))),r.a.createElement("div",{className:v.infoClass+"place-card__info"},r.a.createElement("div",{className:"place-card__price-wrapper"},r.a.createElement("div",{className:"place-card__price"},r.a.createElement("b",{className:"place-card__price-value"},"€",t),r.a.createElement("span",{className:"place-card__price-text"},"/ night")),r.a.createElement("button",{className:"place-card__bookmark-button button"+(i?" place-card__bookmark-button--active":""),type:"button",onClick:()=>g?_(l,!i):h.push("/login"),"data-testid":"to-bookmarks-button"},r.a.createElement("svg",{className:"place-card__bookmark-icon",width:"18",height:"19"},r.a.createElement("use",{xlinkHref:"#icon-bookmark"})),r.a.createElement("span",{className:"visually-hidden"},"To bookmarks"))),r.a.createElement("div",{className:"place-card__rating rating"},r.a.createElement("div",{className:"place-card__stars rating__stars"},r.a.createElement("span",{style:{width:20*s+"%"}}),r.a.createElement("span",{className:"visually-hidden"},"Rating"))),r.a.createElement("h2",{className:"place-card__name"},r.a.createElement(o.b,{to:"/offer/"+l},n)),r.a.createElement("p",{className:"place-card__type"},m)))};u.propTypes={...m.b,onChnageActiveCardId:n.a.func.isRequired,onFavoriteClick:n.a.func.isRequired,isAuth:n.a.bool.isRequired};var p=Object(l.a)(u);function _(){return(_=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}const g={main:"cities__places-list places__list tabs__content",favorites:"favorites__places",offer:"near-places__list places__list"},v=({cards:e,cardType:a,onChnageActiveCardId:t=(()=>{}),onFavoriteClick:i})=>{const s=r.a.useCallback(e=>t(e),[]);return r.a.createElement("div",{className:g[a]},e.map(e=>r.a.createElement(p,_({cardType:a,key:e.id,onChnageActiveCardId:s,onFavoriteClick:i},e))))};v.propTypes={cards:n.a.array.isRequired,cardType:n.a.string.isRequired,onChnageActiveCardId:n.a.func,onFavoriteClick:n.a.func.isRequired};a.a=r.a.memo(v)},77:function(e,a,t){"use strict";var i=t(0),r=t.n(i),s=t(11),n=t.n(s),c=t(78),o=t.n(c),l=(t(79),t(73));const m={main:"cities__map",offer:"property__map"},d={Amsterdam:[52.3833,4.9044],Paris:[48.8589,2.3469],Cologne:[50.9293,6.9595],Brussels:[50.8552,4.3453],Hamburg:[53.5503,10.0006],Dusseldorf:[51.2287,6.7743]},u={width:"100%",height:"100%"},p={zoom:12,zoomControl:!1,marker:!0},_=o.a.icon({iconUrl:"img/pin.svg",iconSize:[30,30]}),g=o.a.icon({iconUrl:"img/pin-active.svg",iconSize:[30,30]}),v=(e,a,t)=>{a.forEach(a=>{o.a.marker({lat:a.location.latitude,lon:a.location.longitude},{icon:a.id===t?g:_}).addTo(e)})},h=e=>{e.eachLayer((function(e){e instanceof o.a.Marker&&e.remove()}))},b=({activeLocation:e,cards:a,activeCardId:t,type:s})=>{const n=Object(i.useRef)(),c=d[e]||e,l=m[s];return Object(i.useEffect)(()=>(n.current=o.a.map("map",{center:c,...p}),o.a.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}).addTo(n.current),v(n.current,a,t),()=>{n.current.remove()}),[]),Object(i.useEffect)(()=>{n.current.flyTo(new o.a.LatLng(...c),p.zoom),h(n.current),v(n.current,a,t)},[JSON.stringify(a)]),Object(i.useEffect)(()=>{h(n.current),v(n.current,a,t)},[t]),r.a.createElement("section",{className:l+" map"},r.a.createElement("div",{id:"map",style:u,ref:n}))};b.propTypes={activeLocation:n.a.oneOfType([n.a.array,n.a.string]).isRequired,cards:n.a.arrayOf(n.a.shape(l.b)),activeCardId:n.a.number,type:n.a.string.isRequired},a.a=r.a.memo(b)},91:function(e,a,t){"use strict";t.r(a);var i=t(0),r=t.n(i),s=t(12),n=t(19),c=t(11),o=t.n(c),l=t(20);const m=e=>e.main.location,d=e=>e.main.type,u=e=>e.main.loaded,p=Object(l.a)([m,e=>e.main.cards,d],(e,a,t)=>{const i=a.filter(a=>a.city.name===e);switch(t){case"Price: high to low":return i.sort((e,a)=>a.price-e.price);case"Price: low to high":return i.sort((e,a)=>e.price-a.price);case"Top rated first":return i.sort((e,a)=>a.rating-e.rating);default:return i}});var _=t(7),g=t(74);const v=["Paris","Cologne","Brussels","Amsterdam","Hamburg","Dusseldorf"],h=({activeLocation:e,changeLocation:a})=>r.a.createElement("section",{className:"locations container"},r.a.createElement("ul",{className:"locations__list tabs__list"},v.map((t,i)=>r.a.createElement("li",{className:"locations__item",key:"location-"+i},r.a.createElement("a",{className:"locations__item-link tabs__item"+(t===e?" tabs__item--active":""),onClick:()=>{a(t)},"data-testid":"tab-link"},r.a.createElement("span",null,t))))));h.propTypes={activeLocation:o.a.string.isRequired,changeLocation:o.a.func.isRequired};var b=h,E=t(76);const f=["Popular","Price: low to high","Price: high to low","Top rated first"],y=({activeOption:e,onChangeOption:a})=>{const[t,s]=Object(i.useState)(!1);return r.a.createElement("form",{className:"places__sorting",action:"#",method:"get"},r.a.createElement("span",{className:"places__sorting-caption"},"Sort by"),r.a.createElement("span",{className:"places__sorting-type",tabIndex:"0",onClick:()=>{s(e=>!e)},"data-testid":"options-button"},e,r.a.createElement("svg",{className:"places__sorting-arrow",width:"7",height:"4"},r.a.createElement("use",{xlinkHref:"#icon-arrow-select"}))),r.a.createElement("ul",{className:"places__options places__options--custom"+(t?" places__options--opened":""),"data-testid":"options-container"},f.map((t,i)=>r.a.createElement("li",{className:"places__option"+(t===e?' places__option--active"':""),tabIndex:"0",key:"places-option-"+i,onClick:()=>{a(t),s(!1)},"data-testid":"option"},t))))};y.propTypes={activeOption:o.a.string.isRequired,onChangeOption:o.a.func.isRequired};const R={onChangeOption:_.e};var q=Object(n.b)(e=>({activeOption:d(e)}),R)(y),N=t(17);const C=({cards:e,location:a,setActiveCardId:t,onFavoriteClick:i})=>r.a.createElement("section",{className:"cities__places places"},r.a.createElement("h2",{className:"visually-hidden"},"Places"),r.a.createElement("b",{className:"places__found"},e.length," places to stay in ",a),r.a.createElement(q,null),r.a.createElement(E.a,{cards:e,cardType:"main",onChnageActiveCardId:t,onFavoriteClick:i}));C.propTypes={location:o.a.string.isRequired,cards:o.a.array.isRequired,setActiveCardId:o.a.func.isRequired,onFavoriteClick:o.a.func.isRequired};const k={onFavoriteClick:N.a};var w=Object(n.b)(null,k)(C);const O=({location:e})=>r.a.createElement("section",{className:"cities__no-places"},r.a.createElement("div",{className:"cities__status-wrapper tabs__content"},r.a.createElement("b",{className:"cities__status"},"No places to stay available"),r.a.createElement("p",{className:"cities__status-description"},"We could not find any property available at the moment in ",e)));O.propTypes={location:o.a.string.isRequired};var L=O,T=t(77);const j=({cards:e,location:a,isEmpty:t})=>{const[s,n]=Object(i.useState)(null);return r.a.createElement("div",{className:"cities"},r.a.createElement("div",{className:"cities__places-container container"+(t?" cities__places-container--empty":"")},t&&r.a.createElement(L,{location:a})||r.a.createElement(w,{cards:e,location:a,setActiveCardId:n}),r.a.createElement("div",{className:"cities__right-section"},!t&&r.a.createElement(T.a,{cards:e,activeLocation:a,activeCardId:s,type:"main"})||"")))};j.propTypes={location:o.a.string.isRequired,cards:o.a.array.isRequired,isEmpty:o.a.bool.isRequired};var A=j,I=t(75);const P=({location:e,cards:a,onChangeLocation:t})=>{const i=!a.length;return r.a.createElement("div",{className:"page page--gray page--main"},r.a.createElement(g.a,null),r.a.createElement("main",{className:"page__main page__main--index"+(i?" page__main--index-empty":"")},r.a.createElement("h1",{className:"visually-hidden"},"Cities"),r.a.createElement("div",{className:"tabs"},r.a.createElement(b,{activeLocation:e,changeLocation:t})),r.a.createElement(A,{cards:a,location:e,isEmpty:i})))};P.propTypes={location:o.a.string.isRequired,cards:o.a.array.isRequired,onChangeLocation:o.a.func.isRequired};const F={onChangeLocation:_.d};a.default=Object(s.d)(Object(n.b)(e=>({location:m(e),cards:p(e),isLoaded:u(e)}),F),I.a)(P)}}]);
//# sourceMappingURL=2.bundle.js.map