(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{73:function(e,a,t){"use strict";t.d(a,"c",(function(){return s})),t.d(a,"d",(function(){return n})),t.d(a,"b",(function(){return c})),t.d(a,"a",(function(){return l}));var r=t(11),i=t.n(r);const s={images:i.a.arrayOf(i.a.string.isRequired),isPremium:i.a.bool.isRequired,title:i.a.string.isRequired,isFavorite:i.a.bool.isRequired,rating:i.a.number.isRequired,type:i.a.string.isRequired,bedrooms:i.a.number.isRequired,maxAdults:i.a.number.isRequired,price:i.a.number.isRequired,goods:i.a.arrayOf(i.a.string.isRequired),host:i.a.shape({avatarUrl:i.a.string.isRequired,id:i.a.number.isRequired,isPro:i.a.bool.isRequired,name:i.a.string.isRequired}),description:i.a.string.isRequired},n={comment:i.a.string.isRequired,date:i.a.string.isRequired,id:i.a.number.isRequired,rating:i.a.number.isRequired,user:i.a.shape({avatarUrl:i.a.string.isRequired,id:i.a.number.isRequired,isPro:i.a.bool.isRequired,name:i.a.string.isRequired})},c={id:i.a.number.isRequired,isFavorite:i.a.bool.isRequired,isPremium:i.a.bool.isRequired,previewImage:i.a.string.isRequired,price:i.a.number.isRequired,rating:i.a.number.isRequired,title:i.a.string.isRequired,type:i.a.string.isRequired,city:i.a.shape({name:i.a.string.isRequired})},l={avatarUrl:i.a.string.isRequired,email:i.a.string.isRequired,id:i.a.number.isRequired,isPro:i.a.bool.isRequired,name:i.a.string.isRequired}},74:function(e,a,t){"use strict";var r=t(0),i=t.n(r),s=t(19),n=t(12),c=t(11),l=t.n(c),o=t(14),m=t(73),d=t(31),u=t(30),p=t(29);const _={border:"none",backgroundColor:"transparent"},v=({isAuth:e,user:a,onLogout:t})=>i.a.createElement("header",{className:"header"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"header__wrapper"},i.a.createElement("div",{className:"header__left"},i.a.createElement(o.b,{className:"header__logo-link header__logo-link--active",to:"/"},i.a.createElement("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"}))),i.a.createElement("nav",{className:"header__nav"},i.a.createElement("ul",{className:"header__nav-list"},i.a.createElement("li",{className:"header__nav-item user"},i.a.createElement(o.b,{className:"header__nav-link header__nav-link--profile",to:e?"/favorites":"/login"},i.a.createElement("div",{className:"header__avatar-wrapper user__avatar-wrapper",style:e&&{backgroundImage:a.avatarUrl}||{}}),i.a.createElement("span",{className:e?"header__user-name user__name":"header__login"},e&&a.email||"Sign in"))),e&&i.a.createElement("li",{className:"header__nav-item user"},i.a.createElement("button",{className:"header__nav-link header__nav-link--profile",style:_,onClick:()=>t(),"data-testid":"logout"},i.a.createElement("span",{className:"header__login"},"Logout"))))))));v.propTypes={isAuth:l.a.bool.isRequired,user:l.a.shape(m.a),onLogout:l.a.func.isRequired};const g={onLogout:u.c};a.a=Object(n.d)(Object(s.b)(e=>({user:Object(d.b)(e)}),g),p.a)(v)},75:function(e,a,t){"use strict";var r=t(0),i=t.n(r),s=t(11),n=t.n(s),c=t(32),l=t(10);a.a=e=>{const a=a=>i.a.createElement(i.a.Fragment,null,a.isLoaded===l.a.LOAD&&i.a.createElement(c.a,null),i.a.createElement(e,a));return a.propTypes={isLoaded:n.a.oneOf([...Object.values(l.a)]).isRequired},a}},76:function(e,a,t){"use strict";var r=t(0),i=t.n(r),s=t(11),n=t.n(s),c=t(3),l=t(14),o=t(29),m=t(73);const d={main:{articleClass:"cities__place-card ",image:{class:"cities",width:260,height:200},infoClass:""},favorites:{articleClass:"favorites__card ",image:{class:"favorites",width:150,height:110},infoClass:"favorites__card-info "},offer:{articleClass:"near-places__card ",image:{class:"near-places",width:260,height:200},infoClass:""}},u=({isPremium:e,previewImage:a,price:t,isFavorite:r,rating:s,title:n,id:o,type:m,cardType:u,onChnageActiveCardId:p,onFavoriteClick:_,isAuth:v})=>{const g=d[u],f=Object(c.g)();return i.a.createElement("article",{className:g.articleClass+"place-card",onMouseEnter:()=>{p(o)},onMouseLeave:()=>{p(null)}},e&&i.a.createElement("div",{className:"place-card__mark"},i.a.createElement("span",null,"Premium"))||"",i.a.createElement("div",{className:g.image.class+"__image-wrapper place-card__image-wrapper"},i.a.createElement(l.b,{to:"/offer/"+o},i.a.createElement("img",{className:"place-card__image",src:a,width:g.image.width,height:g.image.height,alt:"Place image"}))),i.a.createElement("div",{className:g.infoClass+"place-card__info"},i.a.createElement("div",{className:"place-card__price-wrapper"},i.a.createElement("div",{className:"place-card__price"},i.a.createElement("b",{className:"place-card__price-value"},"€",t),i.a.createElement("span",{className:"place-card__price-text"},"/ night")),i.a.createElement("button",{className:"place-card__bookmark-button button"+(r?" place-card__bookmark-button--active":""),type:"button",onClick:()=>v?_(o,!r):f.push("/login"),"data-testid":"to-bookmarks-button"},i.a.createElement("svg",{className:"place-card__bookmark-icon",width:"18",height:"19"},i.a.createElement("use",{xlinkHref:"#icon-bookmark"})),i.a.createElement("span",{className:"visually-hidden"},"To bookmarks"))),i.a.createElement("div",{className:"place-card__rating rating"},i.a.createElement("div",{className:"place-card__stars rating__stars"},i.a.createElement("span",{style:{width:20*s+"%"}}),i.a.createElement("span",{className:"visually-hidden"},"Rating"))),i.a.createElement("h2",{className:"place-card__name"},i.a.createElement(l.b,{to:"/offer/"+o},n)),i.a.createElement("p",{className:"place-card__type"},m)))};u.propTypes={...m.b,onChnageActiveCardId:n.a.func.isRequired,onFavoriteClick:n.a.func.isRequired,isAuth:n.a.bool.isRequired};var p=Object(o.a)(u);function _(){return(_=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}const v={main:"cities__places-list places__list tabs__content",favorites:"favorites__places",offer:"near-places__list places__list"},g=({cards:e,cardType:a,onChnageActiveCardId:t=(()=>{}),onFavoriteClick:r})=>{const s=i.a.useCallback(e=>t(e),[]);return i.a.createElement("div",{className:v[a]},e.map(e=>i.a.createElement(p,_({cardType:a,key:e.id,onChnageActiveCardId:s,onFavoriteClick:r},e))))};g.propTypes={cards:n.a.array.isRequired,cardType:n.a.string.isRequired,onChnageActiveCardId:n.a.func,onFavoriteClick:n.a.func.isRequired};a.a=i.a.memo(g)},90:function(e,a,t){"use strict";t.r(a);var r=t(0),i=t.n(r),s=t(19),n=t(12),c=t(11),l=t.n(c);const o=e=>e.favorites.cards,m=e=>e.favorites.loaded;var d=t(74),u=t(14);var p=()=>i.a.createElement("footer",{className:"footer container"},i.a.createElement(u.b,{className:"footer__logo-link",to:"/"},i.a.createElement("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:"64",height:"33"})));var _=()=>i.a.createElement("section",{className:"favorites favorites--empty"},i.a.createElement("h1",{className:"visually-hidden"},"Favorites (empty)"),i.a.createElement("div",{className:"favorites__status-wrapper"},i.a.createElement("b",{className:"favorites__status"},"Nothing yet saved."),i.a.createElement("p",{className:"favorites__status-description"},"Save properties to narrow down search or plan your future trips."))),v=t(76),g=t(24),f=t(7),h=t(10),b=t(16);const E=({city:e,cards:a,onFavoriteClick:t})=>i.a.createElement("li",{className:"favorites__locations-items"},i.a.createElement("div",{className:"favorites__locations locations locations--current"},i.a.createElement("div",{className:"locations__item"},i.a.createElement("a",{className:"locations__item-link",href:"#"},i.a.createElement("span",null,e)))),i.a.createElement(v.a,{cards:a,cardType:"favorites",onFavoriteClick:t}));E.propTypes={city:l.a.string.isRequired,cards:l.a.array.isRequired,onFavoriteClick:l.a.func.isRequired};const R={onFavoriteClick:(e,a)=>(t,r,i)=>i.post(`favorite/${e}/${Number(a)}`).then(({data:e})=>{t(g.a(Object(b.c)(e))),t(f.a(Object(b.c)(e)))}).catch(()=>{t(g.c(h.a.ERROR))})};var N=Object(s.b)(null,R)(E);const q=["Paris","Cologne","Brussels","Amsterdam","Hamburg","Dusseldorf"],y=({cards:e})=>i.a.createElement("section",{className:"favorites"},i.a.createElement("h1",{className:"favorites__title"},"Saved listing"),i.a.createElement("ul",{className:"favorites__list"},q.map((a,t)=>{const r=e.filter(e=>e.city.name===a);return r.length<1?"":i.a.createElement(N,{city:a,cards:r,key:"favorite-city-"+t})})));y.propTypes={cards:l.a.array.isRequired};var k=y,C=t(75);const w=({cards:e,onComponentMount:a})=>{Object(r.useEffect)(()=>{a()},[]);const t=!e.length;return i.a.createElement("div",{className:"page"+(t?" page--favorites-empty":"")},i.a.createElement(d.a,null),i.a.createElement("main",{className:"page__main page__main--favorites"+(t?" page__main--favorites-empty":"")},i.a.createElement("div",{className:"page__favorites-container container"},t&&i.a.createElement(_,null)||i.a.createElement(k,{cards:e}))),i.a.createElement(p,null))};w.propTypes={cards:l.a.array.isRequired,onComponentMount:l.a.func.isRequired};const O={onComponentMount:()=>(e,a,t)=>(e(g.c(h.a.LOAD)),t.get("favorite").then(({data:a})=>{e(g.b(a.map(b.c))),e(g.c(h.a.LOADED))}).catch(()=>{e(g.c(h.a.ERROR))}))};a.default=Object(n.d)(Object(s.b)(e=>({cards:o(e),isLoaded:m(e)}),O),C.a)(w)}}]);
//# sourceMappingURL=4.bundle.js.map